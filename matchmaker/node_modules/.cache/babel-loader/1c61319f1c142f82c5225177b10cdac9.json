{"ast":null,"code":"import _defineProperty from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _createForOfIteratorHelper from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import strings from\"../../localization\";import enhanceWithClickOutside from\"react-click-outside\";import BaseControl from\"./BaseControl\";var Select=/*#__PURE__*/function(_BaseControl){_inherits(Select,_BaseControl);var _super=_createSuper(Select);function Select(props){var _this;_classCallCheck(this,Select);_this=_super.call(this,props);_this.state={items:props.items?props.items:[],selectedItem:props.selectFirst&&props.items?props.items[0]:props.selectedItem,displayKey:props.displayKey,valueKey:props.valueKey,open:false,placeholder:props.placeholder?props.placeholder:strings.select.placeholder,disabled:props.disabled,searchText:\"\"};_this.customAdd=_this.customAdd.bind(_assertThisInitialized(_this));return _this;}_createClass(Select,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){this.setState({items:nextProps.items?nextProps.items:[],selectedItem:this.getSelectedItem(nextProps.selectedItem,nextProps.items),disabled:nextProps.disabled,placeholder:nextProps.placeholder});}},{key:\"getSelectedItem\",value:function getSelectedItem(value,newItems){if(!value){return undefined;}if(!newItems){var _iterator=_createForOfIteratorHelper(this.state.items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item[this.state.valueKey]===value){return item;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}else{var _iterator2=_createForOfIteratorHelper(newItems),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _item=_step2.value;if(_item[this.state.valueKey]===value){return _item;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}return value;}},{key:\"toggleSelect\",value:function toggleSelect(){if(this.state.disabled){return;}this.setState({open:!this.state.open});}},{key:\"handleClickOutside\",value:function handleClickOutside(){this.setState({open:false});}},{key:\"selectItem\",value:function selectItem(item){var value=this.state.valueKey?item[this.state.valueKey]:item;this.createEvent(value);this.setState({selectedItem:item,open:false});}},{key:\"isCustomAddAllowed\",value:function isCustomAddAllowed(){return this.state.searchText&&this.state.searchText!==\"\";}},{key:\"customAdd\",value:function customAdd(){var item=_defineProperty({text:this.state.searchText},this.state.displayKey,this.state.searchText);this.selectItem(item);}},{key:\"renderOptions\",value:function renderOptions(){var _this2=this;var result=[];if(this.props.showSearch&&!this.props.allowAdd){result.push(/*#__PURE__*/React.createElement(\"input\",{className:\"search\",type:\"text\",onChange:function onChange(event){return _this2.onChange(event);},placeholder:strings.select.search,value:this.state.searchText}));}if(this.props.showSearch&&this.props.allowAdd){result.push(/*#__PURE__*/React.createElement(\"div\",{className:\"add-container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"search\",type:\"text\",onChange:function onChange(event){return _this2.onChange(event);},placeholder:strings.select.search,value:this.state.searchText}),/*#__PURE__*/React.createElement(\"span\",{className:this.isCustomAddAllowed()?\"\":\"disabled\",onClick:this.customAdd},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-check\"}))));}var _iterator3=_createForOfIteratorHelper(this.getItems()),_step3;try{var _loop=function _loop(){var item=_step3.value;result.push(/*#__PURE__*/React.createElement(\"div\",{key:\"select-item-\"+result.length,className:\"item\",onClick:function onClick(){return _this2.selectItem(item);}},/*#__PURE__*/React.createElement(\"p\",null,item[_this2.state.displayKey])));};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return result;}},{key:\"getItems\",value:function getItems(){if(!this.state.searchText||this.state.searchText===\"\"){return this.state.items;}var result=[];var _iterator4=_createForOfIteratorHelper(this.state.items),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var item=_step4.value;if(item[this.state.displayKey].toLowerCase().includes(this.state.searchText.toLowerCase())){result.push(item);}}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return result;}},{key:\"onChange\",value:function onChange(event){this.setState({searchText:event.target.value});}},{key:\"render\",value:function render(){var _this3=this;var icon=this.state.open?/*#__PURE__*/React.createElement(\"i\",{onClick:function onClick(){return _this3.toggleSelect();},className:\"fas fa-caret-up\"}):/*#__PURE__*/React.createElement(\"i\",{onClick:function onClick(){return _this3.toggleSelect();},className:\"fas fa-caret-down\"});return/*#__PURE__*/React.createElement(\"div\",{className:this.state.disabled?\"select disabled\":\"select\"},this.state.selectedItem&&this.state.selectedItem[this.state.displayKey]&&/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return _this3.toggleSelect();}},this.state.selectedItem[this.state.displayKey]),!(this.state.selectedItem&&this.state.selectedItem[this.state.displayKey])&&/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return _this3.toggleSelect();}},this.state.placeholder),icon,/*#__PURE__*/React.createElement(\"div\",{className:this.state.open?\"options active\":\"options\"},this.renderOptions()));}}]);return Select;}(BaseControl);export default enhanceWithClickOutside(Select);","map":{"version":3,"sources":["/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/src/components/controls/Select.js"],"names":["React","strings","enhanceWithClickOutside","BaseControl","Select","props","state","items","selectedItem","selectFirst","displayKey","valueKey","open","placeholder","select","disabled","searchText","customAdd","bind","nextProps","setState","getSelectedItem","value","newItems","undefined","item","createEvent","text","selectItem","result","showSearch","allowAdd","push","event","onChange","search","isCustomAddAllowed","getItems","length","toLowerCase","includes","target","icon","toggleSelect","renderOptions"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport strings from \"../../localization\";\nimport enhanceWithClickOutside from \"react-click-outside\";\nimport BaseControl from \"./BaseControl\";\n\nclass Select extends BaseControl {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      items: props.items ? props.items : [],\n      selectedItem:\n        props.selectFirst && props.items ? props.items[0] : props.selectedItem,\n      displayKey: props.displayKey,\n      valueKey: props.valueKey,\n      open: false,\n      placeholder: props.placeholder\n        ? props.placeholder\n        : strings.select.placeholder,\n      disabled: props.disabled,\n      searchText: \"\"\n    };\n\n    this.customAdd = this.customAdd.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      items: nextProps.items ? nextProps.items : [],\n      selectedItem: this.getSelectedItem(\n        nextProps.selectedItem,\n        nextProps.items\n      ),\n      disabled: nextProps.disabled,\n      placeholder: nextProps.placeholder\n    });\n  }\n\n  getSelectedItem(value, newItems) {\n    if (!value) {\n      return undefined;\n    }\n\n    if (!newItems) {\n      for (let item of this.state.items) {\n        if (item[this.state.valueKey] === value) {\n          return item;\n        }\n      }\n    } else {\n      for (let item of newItems) {\n        if (item[this.state.valueKey] === value) {\n          return item;\n        }\n      }\n    }\n\n    return value;\n  }\n\n  toggleSelect() {\n    if (this.state.disabled) {\n      return;\n    }\n\n    this.setState({\n      open: !this.state.open\n    });\n  }\n\n  handleClickOutside() {\n    this.setState({\n      open: false\n    });\n  }\n\n  selectItem(item) {\n    let value = this.state.valueKey ? item[this.state.valueKey] : item;\n\n    this.createEvent(value);\n\n    this.setState({\n      selectedItem: item,\n      open: false\n    });\n  }\n\n  isCustomAddAllowed() {\n    return this.state.searchText && this.state.searchText !== \"\";\n  }\n\n  customAdd() {\n    let item = {\n      text: this.state.searchText,\n      [this.state.displayKey]: this.state.searchText\n    };\n\n    this.selectItem(item);\n  }\n\n  renderOptions() {\n    let result = [];\n\n    if (this.props.showSearch && !this.props.allowAdd) {\n      result.push(\n        <input\n          className=\"search\"\n          type=\"text\"\n          onChange={event => this.onChange(event)}\n          placeholder={strings.select.search}\n          value={this.state.searchText}\n        />\n      );\n    }\n\n    if (this.props.showSearch && this.props.allowAdd) {\n      result.push(\n        <div className=\"add-container\">\n          <input\n            className=\"search\"\n            type=\"text\"\n            onChange={event => this.onChange(event)}\n            placeholder={strings.select.search}\n            value={this.state.searchText}\n          />\n          <span\n            className={this.isCustomAddAllowed() ? \"\" : \"disabled\"}\n            onClick={this.customAdd}\n          >\n            <i className=\"fas fa-check\" />\n          </span>\n        </div>\n      );\n    }\n\n    for (let item of this.getItems()) {\n      result.push(\n        <div\n          key={\"select-item-\" + result.length}\n          className=\"item\"\n          onClick={() => this.selectItem(item)}\n        >\n          <p>{item[this.state.displayKey]}</p>\n        </div>\n      );\n    }\n\n    return result;\n  }\n\n  getItems() {\n    if (!this.state.searchText || this.state.searchText === \"\") {\n      return this.state.items;\n    }\n\n    let result = [];\n\n    for (let item of this.state.items) {\n      if (\n        item[this.state.displayKey]\n          .toLowerCase()\n          .includes(this.state.searchText.toLowerCase())\n      ) {\n        result.push(item);\n      }\n    }\n\n    return result;\n  }\n\n  onChange(event) {\n    this.setState({\n      searchText: event.target.value\n    });\n  }\n\n  render() {\n    let icon = this.state.open ? (\n      <i onClick={() => this.toggleSelect()} className=\"fas fa-caret-up\" />\n    ) : (\n      <i onClick={() => this.toggleSelect()} className=\"fas fa-caret-down\" />\n    );\n\n    return (\n      <div className={this.state.disabled ? \"select disabled\" : \"select\"}>\n        {this.state.selectedItem &&\n          this.state.selectedItem[this.state.displayKey] && (\n            <p onClick={() => this.toggleSelect()}>\n              {this.state.selectedItem[this.state.displayKey]}\n            </p>\n          )}\n\n        {!(\n          this.state.selectedItem &&\n          this.state.selectedItem[this.state.displayKey]\n        ) && (\n          <p onClick={() => this.toggleSelect()}>{this.state.placeholder}</p>\n        )}\n\n        {icon}\n\n        <div className={this.state.open ? \"options active\" : \"options\"}>\n          {this.renderOptions()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhanceWithClickOutside(Select);\n"]},"metadata":{},"sourceType":"module"}