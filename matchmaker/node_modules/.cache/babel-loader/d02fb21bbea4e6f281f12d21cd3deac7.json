{"ast":null,"code":"import _slicedToArray from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _createForOfIteratorHelper from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import FormComponent from\"./FormComponent\";var Page=/*#__PURE__*/function(_FormComponent){_inherits(Page,_FormComponent);var _super=_createSuper(Page);function Page(props){var _this;_classCallCheck(this,Page);_this=_super.call(this,props);_this.params=[];_this.page=undefined;_this.setPage=_this.setPage.bind(_assertThisInitialized(_this));return _this;}_createClass(Page,[{key:\"componentWillMount\",value:function componentWillMount(){this.loadParams();this.fetchData();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(props){if(!this.needRefresh()){return;}this.fetchData();}},{key:\"fetchData\",value:function fetchData(){}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){window.scrollTo(0,0);}},{key:\"getSearchParam\",value:function getSearchParam(param){var url=new URL(window.location);return url.searchParams.get(param);}},{key:\"loadParams\",value:function loadParams(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"searchData\";var loadedData={};var _iterator=_createForOfIteratorHelper(this.params),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var param=_step.value;var paramString=this.getSearchParam(param.name);var value=void 0;if(!paramString||paramString===\"\"){if(this.props[param.name]){loadedData[param.name]=this.props[param.name];}else{loadedData[param.name]=param.default;}continue;}if(paramString.includes(\",\")){value=[];var _iterator2=_createForOfIteratorHelper(paramString.split(\",\")),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var item=_step2.value;if(this.isNumeric(item)){if(this.isFloat(item)){value.push(parseFloat(item));}else if(this.isInt(item)){value.push(parseInt(item));}}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}else if(this.isNumeric(paramString)){if(this.isFloat(paramString)){value=parseFloat(paramString);}else if(this.isInt(paramString)){value=parseInt(paramString);}}else{value=paramString;}loadedData[param.name]=value;}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.state[data]=loadedData;}},{key:\"buildParams\",value:function buildParams(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"searchData\";var result=\"?\";var hasParams=false;var _iterator3=_createForOfIteratorHelper(this.params),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var param=_step3.value;if(this.state[data][param.name]){result+=this.buildParam(param,this.state[data],hasParams);hasParams=true;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return hasParams?result:\"\";}},{key:\"buildParam\",value:function buildParam(param,data,hasParams){var result=param.name+\"=\";if(hasParams){result=\"&\"+result;}if(Array.isArray(data[param.name])){result+=data[param.name].join();}else{result+=data[param.name];}return result;}},{key:\"needRefresh\",value:function needRefresh(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"searchData\";var oldParams=JSON.parse(JSON.stringify(this.state[data]));this.loadParams(data);for(var _i=0,_Object$entries=Object.entries(this.state[data]);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];if(oldParams[key]!=this.state[data][key]){return true;}}return false;}},{key:\"setPage\",value:function setPage(page){this.state.searchData.page=page;/* path is undefined */ //this.props.history.push(this.page.path + this.buildParams());\nthis.props.history.push(this.buildParams());window.location.reload(false);this.fetchData();}}]);return Page;}(FormComponent);export default Page;","map":{"version":3,"sources":["/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/src/common/Page.js"],"names":["FormComponent","Page","props","params","page","undefined","setPage","bind","loadParams","fetchData","needRefresh","window","scrollTo","param","url","URL","location","searchParams","get","data","loadedData","paramString","getSearchParam","name","value","default","includes","split","item","isNumeric","isFloat","push","parseFloat","isInt","parseInt","state","result","hasParams","buildParam","Array","isArray","join","oldParams","JSON","parse","stringify","Object","entries","key","searchData","history","buildParams","reload"],"mappings":"s2CAAA,MAAOA,CAAAA,aAAP,KAA0B,iBAA1B,C,GAEMC,CAAAA,I,oGAIJ,cAAYC,KAAZ,CAAmB,sCACjB,uBAAMA,KAAN,EADiB,MAHnBC,MAGmB,CAHV,EAGU,OAFnBC,IAEmB,CAFZC,SAEY,CAGjB,MAAKC,OAAL,CAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf,CAHiB,aAIlB,C,gFAEoB,CACnB,KAAKC,UAAL,GAEA,KAAKC,SAAL,GACD,C,4EAEyBP,K,CAAO,CAC/B,GAAI,CAAC,KAAKQ,WAAL,EAAL,CAAyB,CACvB,OACD,CAED,KAAKD,SAAL,GACD,C,6CAEW,CAAE,C,+DAEO,CACnBE,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,C,sDAEcC,K,CAAO,CACpB,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,GAAJ,CAAQJ,MAAM,CAACK,QAAf,CAAV,CAEA,MAAOF,CAAAA,GAAG,CAACG,YAAJ,CAAiBC,GAAjB,CAAqBL,KAArB,CAAP,CACD,C,+CAE+B,IAArBM,CAAAA,IAAqB,2DAAd,YAAc,CAC9B,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CAD8B,yCAGZ,KAAKjB,MAHO,YAG9B,+CAA+B,IAAtBU,CAAAA,KAAsB,aAC7B,GAAIQ,CAAAA,WAAW,CAAG,KAAKC,cAAL,CAAoBT,KAAK,CAACU,IAA1B,CAAlB,CACA,GAAIC,CAAAA,KAAK,OAAT,CAEA,GAAI,CAACH,WAAD,EAAgBA,WAAW,GAAK,EAApC,CAAwC,CACtC,GAAI,KAAKnB,KAAL,CAAWW,KAAK,CAACU,IAAjB,CAAJ,CAA4B,CAC1BH,UAAU,CAACP,KAAK,CAACU,IAAP,CAAV,CAAyB,KAAKrB,KAAL,CAAWW,KAAK,CAACU,IAAjB,CAAzB,CACD,CAFD,IAEO,CACLH,UAAU,CAACP,KAAK,CAACU,IAAP,CAAV,CAAyBV,KAAK,CAACY,OAA/B,CACD,CAED,SACD,CAED,GAAIJ,WAAW,CAACK,QAAZ,CAAqB,GAArB,CAAJ,CAA+B,CAC7BF,KAAK,CAAG,EAAR,CAD6B,0CAGZH,WAAW,CAACM,KAAZ,CAAkB,GAAlB,CAHY,aAG7B,kDAAyC,IAAhCC,CAAAA,IAAgC,cACvC,GAAI,KAAKC,SAAL,CAAeD,IAAf,CAAJ,CAA0B,CACxB,GAAI,KAAKE,OAAL,CAAaF,IAAb,CAAJ,CAAwB,CACtBJ,KAAK,CAACO,IAAN,CAAWC,UAAU,CAACJ,IAAD,CAArB,EACD,CAFD,IAEO,IAAI,KAAKK,KAAL,CAAWL,IAAX,CAAJ,CAAsB,CAC3BJ,KAAK,CAACO,IAAN,CAAWG,QAAQ,CAACN,IAAD,CAAnB,EACD,CACF,CACF,CAX4B,uDAY9B,CAZD,IAYO,IAAI,KAAKC,SAAL,CAAeR,WAAf,CAAJ,CAAiC,CACtC,GAAI,KAAKS,OAAL,CAAaT,WAAb,CAAJ,CAA+B,CAC7BG,KAAK,CAAGQ,UAAU,CAACX,WAAD,CAAlB,CACD,CAFD,IAEO,IAAI,KAAKY,KAAL,CAAWZ,WAAX,CAAJ,CAA6B,CAClCG,KAAK,CAAGU,QAAQ,CAACb,WAAD,CAAhB,CACD,CACF,CANM,IAMA,CACLG,KAAK,CAAGH,WAAR,CACD,CAEDD,UAAU,CAACP,KAAK,CAACU,IAAP,CAAV,CAAyBC,KAAzB,CACD,CAxC6B,qDA0C9B,KAAKW,KAAL,CAAWhB,IAAX,EAAmBC,UAAnB,CACD,C,iDAEgC,IAArBD,CAAAA,IAAqB,2DAAd,YAAc,CAC/B,GAAIiB,CAAAA,MAAM,CAAG,GAAb,CACA,GAAIC,CAAAA,SAAS,CAAG,KAAhB,CAF+B,0CAIb,KAAKlC,MAJQ,aAI/B,kDAA+B,IAAtBU,CAAAA,KAAsB,cAC7B,GAAI,KAAKsB,KAAL,CAAWhB,IAAX,EAAiBN,KAAK,CAACU,IAAvB,CAAJ,CAAkC,CAChCa,MAAM,EAAI,KAAKE,UAAL,CAAgBzB,KAAhB,CAAuB,KAAKsB,KAAL,CAAWhB,IAAX,CAAvB,CAAyCkB,SAAzC,CAAV,CACAA,SAAS,CAAG,IAAZ,CACD,CACF,CAT8B,uDAW/B,MAAOA,CAAAA,SAAS,CAAGD,MAAH,CAAY,EAA5B,CACD,C,8CAEUvB,K,CAAOM,I,CAAMkB,S,CAAW,CACjC,GAAID,CAAAA,MAAM,CAAGvB,KAAK,CAACU,IAAN,CAAa,GAA1B,CAEA,GAAIc,SAAJ,CAAe,CACbD,MAAM,CAAG,IAAMA,MAAf,CACD,CAED,GAAIG,KAAK,CAACC,OAAN,CAAcrB,IAAI,CAACN,KAAK,CAACU,IAAP,CAAlB,CAAJ,CAAqC,CACnCa,MAAM,EAAIjB,IAAI,CAACN,KAAK,CAACU,IAAP,CAAJ,CAAiBkB,IAAjB,EAAV,CACD,CAFD,IAEO,CACLL,MAAM,EAAIjB,IAAI,CAACN,KAAK,CAACU,IAAP,CAAd,CACD,CAED,MAAOa,CAAAA,MAAP,CACD,C,iDAEgC,IAArBjB,CAAAA,IAAqB,2DAAd,YAAc,CAC/B,GAAMuB,CAAAA,SAAS,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAKV,KAAL,CAAWhB,IAAX,CAAf,CAAX,CAAlB,CAEA,KAAKX,UAAL,CAAgBW,IAAhB,EAEA,6BAA2B2B,MAAM,CAACC,OAAP,CAAe,KAAKZ,KAAL,CAAWhB,IAAX,CAAf,CAA3B,gCAA6D,8DAAjD6B,GAAiD,uBAA5CxB,KAA4C,uBAC3D,GAAIkB,SAAS,CAACM,GAAD,CAAT,EAAkB,KAAKb,KAAL,CAAWhB,IAAX,EAAiB6B,GAAjB,CAAtB,CAA6C,CAC3C,MAAO,KAAP,CACD,CACF,CAED,MAAO,MAAP,CACD,C,wCAEO5C,I,CAAM,CACZ,KAAK+B,KAAL,CAAWc,UAAX,CAAsB7C,IAAtB,CAA6BA,IAA7B,CAEA,uBAHY,CAIZ;AAEA,KAAKF,KAAL,CAAWgD,OAAX,CAAmBnB,IAAnB,CAAwB,KAAKoB,WAAL,EAAxB,EAEAxC,MAAM,CAACK,QAAP,CAAgBoC,MAAhB,CAAuB,KAAvB,EAEA,KAAK3C,SAAL,GACD,C,kBAxIgBT,a,EA2InB,cAAeC,CAAAA,IAAf","sourcesContent":["import FormComponent from \"./FormComponent\";\n\nclass Page extends FormComponent {\n  params = [];\n  page = undefined;\n\n  constructor(props) {\n    super(props);\n\n    this.setPage = this.setPage.bind(this);\n  }\n\n  componentWillMount() {\n    this.loadParams();\n\n    this.fetchData();\n  }\n\n  componentWillReceiveProps(props) {\n    if (!this.needRefresh()) {\n      return;\n    }\n\n    this.fetchData();\n  }\n\n  fetchData() {}\n\n  componentDidUpdate() {\n    window.scrollTo(0, 0);\n  }\n\n  getSearchParam(param) {\n    let url = new URL(window.location);\n\n    return url.searchParams.get(param);\n  }\n\n  loadParams(data = \"searchData\") {\n    let loadedData = {};\n\n    for (let param of this.params) {\n      let paramString = this.getSearchParam(param.name);\n      let value;\n\n      if (!paramString || paramString === \"\") {\n        if (this.props[param.name]) {\n          loadedData[param.name] = this.props[param.name];\n        } else {\n          loadedData[param.name] = param.default;\n        }\n\n        continue;\n      }\n\n      if (paramString.includes(\",\")) {\n        value = [];\n\n        for (let item of paramString.split(\",\")) {\n          if (this.isNumeric(item)) {\n            if (this.isFloat(item)) {\n              value.push(parseFloat(item));\n            } else if (this.isInt(item)) {\n              value.push(parseInt(item));\n            }\n          }\n        }\n      } else if (this.isNumeric(paramString)) {\n        if (this.isFloat(paramString)) {\n          value = parseFloat(paramString);\n        } else if (this.isInt(paramString)) {\n          value = parseInt(paramString);\n        }\n      } else {\n        value = paramString;\n      }\n\n      loadedData[param.name] = value;\n    }\n\n    this.state[data] = loadedData;\n  }\n\n  buildParams(data = \"searchData\") {\n    let result = \"?\";\n    let hasParams = false;\n\n    for (let param of this.params) {\n      if (this.state[data][param.name]) {\n        result += this.buildParam(param, this.state[data], hasParams);\n        hasParams = true;\n      }\n    }\n\n    return hasParams ? result : \"\";\n  }\n\n  buildParam(param, data, hasParams) {\n    let result = param.name + \"=\";\n\n    if (hasParams) {\n      result = \"&\" + result;\n    }\n\n    if (Array.isArray(data[param.name])) {\n      result += data[param.name].join();\n    } else {\n      result += data[param.name];\n    }\n\n    return result;\n  }\n\n  needRefresh(data = \"searchData\") {\n    const oldParams = JSON.parse(JSON.stringify(this.state[data]));\n\n    this.loadParams(data);\n\n    for (const [key, value] of Object.entries(this.state[data])) {\n      if (oldParams[key] != this.state[data][key]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  setPage(page) {\n    this.state.searchData.page = page;\n\n    /* path is undefined */\n    //this.props.history.push(this.page.path + this.buildParams());\n\n    this.props.history.push(this.buildParams());\n\n    window.location.reload(false);\n\n    this.fetchData();\n  }\n}\n\nexport default Page;\n"]},"metadata":{},"sourceType":"module"}