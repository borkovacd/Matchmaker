{"ast":null,"code":"import _classCallCheck from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Page from\"../../common/Page\";import Validators from\"../../constants/ValidatorTypes\";import{login as _login}from\"../../base/OAuth\";import strings from\"../../localization\";import{withRouter}from\"react-router-dom\";import*as Actions from\"../../actions/Actions\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import LoginForm from\"../../components/forms/user/LoginForm\";import{OK}from\"http-status-codes\";var Login=/*#__PURE__*/function(_Page){_inherits(Login,_Page);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.validationList={username:[{type:Validators.REQUIRED}],password:[{type:Validators.REQUIRED}]};_this.state={data:{},errors:{},redirectUrl:props.location.state?props.location.state.redirectUrl:\"/\"};_this.keyPress=_this.keyPress.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"keyPress\",value:function keyPress(event){if(event.key===\"Enter\"){this.login();}}},{key:\"componentDidMount\",value:function componentDidMount(){window.scrollTo(0,0);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}},{key:\"login\",value:function login(){var _this2=this;if(!this.validate()){return;}_login(this.state.data.username,this.state.data.password).then(function(response){if(response.status!==OK){_this2.setError(\"username\",strings.loginForm.wrongCredentials);return;}_this2.props.login(response.data.user);_this2.props.history.push({pathname:_this2.state.redirectUrl});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"login-registration-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-title\"},strings.menu.Login),/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-grid-container\"},/*#__PURE__*/React.createElement(LoginForm,{errors:this.state.errors,data:this.state.data,keyPress:this.keyPress,onChange:this.changeData,onSubmit:function onSubmit(){return _this3.login();}}),/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-social-buttons\"},/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-social-buttons-title\"},strings.loginForm.loginWith),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"a\",{className:\"fb social-btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-facebook-f i\"}),\" \",strings.loginForm.continueWith,\" Facebook\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"a\",{className:\"twitter social-btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-twitter i\"}),\" \",strings.loginForm.continueWith,\" Twitter\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"a\",{className:\"google social-btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-google-plus-g i\"}),\" \",strings.loginForm.continueWith,\" Google\")))));}}]);return Login;}(Page);function mapDispatchToProps(dispatch){return bindActionCreators({login:Actions.login},dispatch);}function mapStateToProps(_ref){var authReducers=_ref.authReducers;return authReducers;}export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Login));","map":{"version":3,"sources":["/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/src/pages/user/Login.js"],"names":["React","Page","Validators","login","strings","withRouter","Actions","connect","bindActionCreators","LoginForm","OK","Login","props","validationList","username","type","REQUIRED","password","state","data","errors","redirectUrl","location","keyPress","bind","event","key","window","scrollTo","validate","then","response","status","setError","loginForm","wrongCredentials","user","history","push","pathname","menu","changeData","loginWith","continueWith","mapDispatchToProps","dispatch","mapStateToProps","authReducers"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Page from \"../../common/Page\";\nimport Validators from \"../../constants/ValidatorTypes\";\nimport { login } from \"../../base/OAuth\";\nimport strings from \"../../localization\";\nimport { withRouter } from \"react-router-dom\";\nimport * as Actions from \"../../actions/Actions\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport LoginForm from \"../../components/forms/user/LoginForm\";\nimport { OK } from \"http-status-codes\";\n\nclass Login extends Page {\n  validationList = {\n    username: [{ type: Validators.REQUIRED }],\n    password: [{ type: Validators.REQUIRED }]\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: {},\n      errors: {},\n      redirectUrl: props.location.state ? props.location.state.redirectUrl : \"/\"\n    };\n\n    this.keyPress = this.keyPress.bind(this);\n  }\n\n  keyPress(event) {\n    if (event.key === \"Enter\") {\n      this.login();\n    }\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  componentDidUpdate() {}\n\n  login() {\n    if (!this.validate()) {\n      return;\n    }\n\n    login(this.state.data.username, this.state.data.password).then(response => {\n      if (response.status !== OK) {\n        this.setError(\"username\", strings.loginForm.wrongCredentials);\n        return;\n      }\n      this.props.login(response.data.user);\n\n      this.props.history.push({\n        pathname: this.state.redirectUrl\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"login-registration-page\">\n        <div className=\"lrp-title\">{strings.menu.Login}</div>\n\n        <div className=\"lrp-grid-container\">\n          <LoginForm\n            errors={this.state.errors}\n            data={this.state.data}\n            keyPress={this.keyPress}\n            onChange={this.changeData}\n            onSubmit={() => this.login()}\n          />\n\n          <div className=\"lrp-social-buttons\">\n            <div className=\"lrp-social-buttons-title\">\n              {strings.loginForm.loginWith}\n            </div>\n\n            <div className=\"row\">\n              <a className=\"fb social-btn\">\n                <i className=\"fab fa-facebook-f i\"></i>{\" \"}\n                {strings.loginForm.continueWith} Facebook\n              </a>\n            </div>\n\n            <div className=\"row\">\n              <a className=\"twitter social-btn\">\n                <i className=\"fab fa-twitter i\"></i>{\" \"}\n                {strings.loginForm.continueWith} Twitter\n              </a>\n            </div>\n            <div className=\"row\">\n              <a className=\"google social-btn\">\n                <i className=\"fab fa-google-plus-g i\"></i>{\" \"}\n                {strings.loginForm.continueWith} Google\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      login: Actions.login\n    },\n    dispatch\n  );\n}\n\nfunction mapStateToProps({ authReducers }) {\n  return authReducers;\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\n"]},"metadata":{},"sourceType":"module"}