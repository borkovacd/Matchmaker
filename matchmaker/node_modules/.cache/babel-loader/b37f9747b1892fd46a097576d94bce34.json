{"ast":null,"code":"import _classCallCheck from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Page from\"../../common/Page\";import{setTokenToLocalStorage,setUserToLocalStorage}from\"../../base/OAuth\";import Validators from\"../../constants/ValidatorTypes\";import{withRouter}from\"react-router-dom\";import*as Actions from\"../../actions/Actions\";import{connect}from\"react-redux\";import{bindActionCreators}from\"redux\";import RegistrationFirstStepForm from\"../../components/forms/user/RegistrationFirstStepForm\";import{register}from\"../../services/UserService\";import strings from\"../../localization\";import{OK}from\"http-status-codes\";var RegistrationFirstStep=/*#__PURE__*/function(_Page){_inherits(RegistrationFirstStep,_Page);var _super=_createSuper(RegistrationFirstStep);function RegistrationFirstStep(props){var _this;_classCallCheck(this,RegistrationFirstStep);_this=_super.call(this,props);_this.registerValidationList={username:[{type:Validators.REQUIRED}],name:[{type:Validators.REQUIRED}],email:[{type:Validators.EMAIL}]};_this.state={data:{},errors:{},redirectUrl:props.location.state?props.location.state.redirectUrl:\"/\"};_this.submit=_this.submit.bind(_assertThisInitialized(_this));_this.validationList=_this.registerValidationList;return _this;}_createClass(RegistrationFirstStep,[{key:\"componentDidMount\",value:function componentDidMount(){window.scrollTo(0,0);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){//window.scrollTo(0, 0);\n}},{key:\"submit\",value:function submit(){var _this2=this;if(!this.validate()){return;}this.props.showLoader();register(this.state.data).then(function(response){if(response.status!==OK){_this2.setError(\"email\",strings.registrationForm.emailExists);_this2.props.hideLoader();return;}_this2.props.hideLoader();setTokenToLocalStorage(response.data.access_token,response.data.refresh_token);setUserToLocalStorage(response.data.user);_this2.props.login(response.data.user);_this2.props.history.push(\"/registration2\");});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"login-registration-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-title\"},strings.menu.Register),/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-grid-container\"},/*#__PURE__*/React.createElement(RegistrationFirstStepForm,{data:this.state.data,errors:this.state.errors,onSubmit:this.submit,onChange:this.changeData,handle:this.handle,rangeChange:function rangeChange(event){return _this3.rangeChange(event,\"interestedInAge\");}}),/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-social-buttons\"},/*#__PURE__*/React.createElement(\"div\",{className:\"lrp-social-buttons-title longer\"},strings.registrationForm.continueWithDescription),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"a\",{className:\"fb social-btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-facebook-f i\"}),strings.registrationForm.continueWith,\" Facebook\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"a\",{className:\"twitter social-btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-twitter i\"}),\" \",strings.registrationForm.continueWith,\" Twitter\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"a\",{className:\"google social-btn\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fab fa-google-plus-g i\"}),strings.registrationForm.continueWith,\" Google\")))));}}]);return RegistrationFirstStep;}(Page);function mapDispatchToProps(dispatch){return bindActionCreators({showLoader:Actions.showLoader,hideLoader:Actions.hideLoader,login:Actions.login},dispatch);}function mapStateToProps(_ref){var siteDataReducers=_ref.siteDataReducers,authReducers=_ref.authReducers;return siteDataReducers,authReducers;}export default withRouter(connect(mapStateToProps,mapDispatchToProps)(RegistrationFirstStep));","map":{"version":3,"sources":["/home/korisnik/Desktop/Borkovac/MyProjects/Matchmaker/Matchmaker/matchmaker/src/pages/user/RegistrationFirstStep.js"],"names":["React","Page","setTokenToLocalStorage","setUserToLocalStorage","Validators","withRouter","Actions","connect","bindActionCreators","RegistrationFirstStepForm","register","strings","OK","RegistrationFirstStep","props","registerValidationList","username","type","REQUIRED","name","email","EMAIL","state","data","errors","redirectUrl","location","submit","bind","validationList","window","scrollTo","validate","showLoader","then","response","status","setError","registrationForm","emailExists","hideLoader","access_token","refresh_token","user","login","history","push","menu","Register","changeData","handle","event","rangeChange","continueWithDescription","continueWith","mapDispatchToProps","dispatch","mapStateToProps","siteDataReducers","authReducers"],"mappings":"08BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,OACEC,sBADF,CAEEC,qBAFF,KAGO,kBAHP,CAIA,MAAOC,CAAAA,UAAP,KAAuB,gCAAvB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,uBAAzB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAOC,CAAAA,yBAAP,KAAsC,uDAAtC,CACA,OAASC,QAAT,KAAyB,4BAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,OAASC,EAAT,KAAmB,mBAAnB,C,GAEMC,CAAAA,qB,oHAOJ,+BAAYC,KAAZ,CAAmB,uDACjB,uBAAMA,KAAN,EADiB,MANnBC,sBAMmB,CANM,CACvBC,QAAQ,CAAE,CAAC,CAAEC,IAAI,CAAEb,UAAU,CAACc,QAAnB,CAAD,CADa,CAEvBC,IAAI,CAAE,CAAC,CAAEF,IAAI,CAAEb,UAAU,CAACc,QAAnB,CAAD,CAFiB,CAGvBE,KAAK,CAAE,CAAC,CAAEH,IAAI,CAAEb,UAAU,CAACiB,KAAnB,CAAD,CAHgB,CAMN,CAGjB,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,EADK,CAEXC,MAAM,CAAE,EAFG,CAGXC,WAAW,CAAEX,KAAK,CAACY,QAAN,CAAeJ,KAAf,CAAuBR,KAAK,CAACY,QAAN,CAAeJ,KAAf,CAAqBG,WAA5C,CAA0D,GAH5D,CAAb,CAMA,MAAKE,MAAL,CAAc,MAAKA,MAAL,CAAYC,IAAZ,+BAAd,CAEA,MAAKC,cAAL,CAAsB,MAAKd,sBAA3B,CAXiB,aAYlB,C,+FAEmB,CAClBe,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,C,+DAEoB,CACnB;AACD,C,uCAEQ,iBACP,GAAI,CAAC,KAAKC,QAAL,EAAL,CAAsB,CACpB,OACD,CAED,KAAKlB,KAAL,CAAWmB,UAAX,GAEAvB,QAAQ,CAAC,KAAKY,KAAL,CAAWC,IAAZ,CAAR,CAA0BW,IAA1B,CAA+B,SAAAC,QAAQ,CAAI,CACzC,GAAIA,QAAQ,CAACC,MAAT,GAAoBxB,EAAxB,CAA4B,CAC1B,MAAI,CAACyB,QAAL,CAAc,OAAd,CAAuB1B,OAAO,CAAC2B,gBAAR,CAAyBC,WAAhD,EACA,MAAI,CAACzB,KAAL,CAAW0B,UAAX,GACA,OACD,CAED,MAAI,CAAC1B,KAAL,CAAW0B,UAAX,GACAtC,sBAAsB,CACpBiC,QAAQ,CAACZ,IAAT,CAAckB,YADM,CAEpBN,QAAQ,CAACZ,IAAT,CAAcmB,aAFM,CAAtB,CAIAvC,qBAAqB,CAACgC,QAAQ,CAACZ,IAAT,CAAcoB,IAAf,CAArB,CACA,MAAI,CAAC7B,KAAL,CAAW8B,KAAX,CAAiBT,QAAQ,CAACZ,IAAT,CAAcoB,IAA/B,EAEA,MAAI,CAAC7B,KAAL,CAAW+B,OAAX,CAAmBC,IAAnB,CAAwB,gBAAxB,EACD,CAhBD,EAiBD,C,uCAEQ,iBACP,mBACE,2BAAK,SAAS,CAAC,yBAAf,eACE,2BAAK,SAAS,CAAC,WAAf,EAA4BnC,OAAO,CAACoC,IAAR,CAAaC,QAAzC,CADF,cAGE,2BAAK,SAAS,CAAC,oBAAf,eACE,oBAAC,yBAAD,EACE,IAAI,CAAE,KAAK1B,KAAL,CAAWC,IADnB,CAEE,MAAM,CAAE,KAAKD,KAAL,CAAWE,MAFrB,CAGE,QAAQ,CAAE,KAAKG,MAHjB,CAIE,QAAQ,CAAE,KAAKsB,UAJjB,CAKE,MAAM,CAAE,KAAKC,MALf,CAME,WAAW,CAAE,qBAAAC,KAAK,QAAI,CAAA,MAAI,CAACC,WAAL,CAAiBD,KAAjB,CAAwB,iBAAxB,CAAJ,EANpB,EADF,cAUE,2BAAK,SAAS,CAAC,oBAAf,eACE,2BAAK,SAAS,CAAC,iCAAf,EACGxC,OAAO,CAAC2B,gBAAR,CAAyBe,uBAD5B,CADF,cAKE,2BAAK,SAAS,CAAC,KAAf,eACE,yBAAG,SAAS,CAAC,eAAb,eACE,yBAAG,SAAS,CAAC,qBAAb,EADF,CAEG1C,OAAO,CAAC2B,gBAAR,CAAyBgB,YAF5B,aADF,CALF,cAYE,2BAAK,SAAS,CAAC,KAAf,eACE,yBAAG,SAAS,CAAC,oBAAb,eACE,yBAAG,SAAS,CAAC,kBAAb,EADF,CACuC,GADvC,CAEG3C,OAAO,CAAC2B,gBAAR,CAAyBgB,YAF5B,YADF,CAZF,cAkBE,2BAAK,SAAS,CAAC,KAAf,eACE,yBAAG,SAAS,CAAC,mBAAb,eACE,yBAAG,SAAS,CAAC,wBAAb,EADF,CAEG3C,OAAO,CAAC2B,gBAAR,CAAyBgB,YAF5B,WADF,CAlBF,CAVF,CAHF,CADF,CA0CD,C,mCAlGiCrD,I,EAqGpC,QAASsD,CAAAA,kBAAT,CAA4BC,QAA5B,CAAsC,CACpC,MAAOhD,CAAAA,kBAAkB,CACvB,CACEyB,UAAU,CAAE3B,OAAO,CAAC2B,UADtB,CAEEO,UAAU,CAAElC,OAAO,CAACkC,UAFtB,CAGEI,KAAK,CAAEtC,OAAO,CAACsC,KAHjB,CADuB,CAMvBY,QANuB,CAAzB,CAQD,CAED,QAASC,CAAAA,eAAT,MAA6D,IAAlCC,CAAAA,gBAAkC,MAAlCA,gBAAkC,CAAhBC,YAAgB,MAAhBA,YAAgB,CAC3D,MAAOD,CAAAA,gBAAgB,CAAEC,YAAzB,CACD,CAED,cAAetD,CAAAA,UAAU,CACvBE,OAAO,CAACkD,eAAD,CAAkBF,kBAAlB,CAAP,CAA6C1C,qBAA7C,CADuB,CAAzB","sourcesContent":["import React from \"react\";\nimport Page from \"../../common/Page\";\nimport {\n  setTokenToLocalStorage,\n  setUserToLocalStorage\n} from \"../../base/OAuth\";\nimport Validators from \"../../constants/ValidatorTypes\";\nimport { withRouter } from \"react-router-dom\";\nimport * as Actions from \"../../actions/Actions\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport RegistrationFirstStepForm from \"../../components/forms/user/RegistrationFirstStepForm\";\nimport { register } from \"../../services/UserService\";\nimport strings from \"../../localization\";\nimport { OK } from \"http-status-codes\";\n\nclass RegistrationFirstStep extends Page {\n  registerValidationList = {\n    username: [{ type: Validators.REQUIRED }],\n    name: [{ type: Validators.REQUIRED }],\n    email: [{ type: Validators.EMAIL }]\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: {},\n      errors: {},\n      redirectUrl: props.location.state ? props.location.state.redirectUrl : \"/\"\n    };\n\n    this.submit = this.submit.bind(this);\n\n    this.validationList = this.registerValidationList;\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  componentDidUpdate() {\n    //window.scrollTo(0, 0);\n  }\n\n  submit() {\n    if (!this.validate()) {\n      return;\n    }\n\n    this.props.showLoader();\n\n    register(this.state.data).then(response => {\n      if (response.status !== OK) {\n        this.setError(\"email\", strings.registrationForm.emailExists);\n        this.props.hideLoader();\n        return;\n      }\n\n      this.props.hideLoader();\n      setTokenToLocalStorage(\n        response.data.access_token,\n        response.data.refresh_token\n      );\n      setUserToLocalStorage(response.data.user);\n      this.props.login(response.data.user);\n\n      this.props.history.push(\"/registration2\");\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"login-registration-page\">\n        <div className=\"lrp-title\">{strings.menu.Register}</div>\n\n        <div className=\"lrp-grid-container\">\n          <RegistrationFirstStepForm\n            data={this.state.data}\n            errors={this.state.errors}\n            onSubmit={this.submit}\n            onChange={this.changeData}\n            handle={this.handle}\n            rangeChange={event => this.rangeChange(event, \"interestedInAge\")}\n          />\n\n          <div className=\"lrp-social-buttons\">\n            <div className=\"lrp-social-buttons-title longer\">\n              {strings.registrationForm.continueWithDescription}\n            </div>\n\n            <div className=\"row\">\n              <a className=\"fb social-btn\">\n                <i className=\"fab fa-facebook-f i\"></i>\n                {strings.registrationForm.continueWith} Facebook\n              </a>\n            </div>\n\n            <div className=\"row\">\n              <a className=\"twitter social-btn\">\n                <i className=\"fab fa-twitter i\"></i>{\" \"}\n                {strings.registrationForm.continueWith} Twitter\n              </a>\n            </div>\n            <div className=\"row\">\n              <a className=\"google social-btn\">\n                <i className=\"fab fa-google-plus-g i\"></i>\n                {strings.registrationForm.continueWith} Google\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      showLoader: Actions.showLoader,\n      hideLoader: Actions.hideLoader,\n      login: Actions.login\n    },\n    dispatch\n  );\n}\n\nfunction mapStateToProps({ siteDataReducers, authReducers }) {\n  return siteDataReducers, authReducers;\n}\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(RegistrationFirstStep)\n);\n"]},"metadata":{},"sourceType":"module"}